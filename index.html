<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Tomato Timer</title>
    <script src="jquery16.min.js" type="text/javascript"></script>
    <script src="ICanHaz.min.js" type="text/javascript"></script>
    <script src="tomato.js" type="text/javascript"></script>
    <script src="todolist.js" type="text/javascript"></script>

    <script id="todoItem" type="text/html">
        <tr id="todo-{{ id }}">
            <td><input todoId="{{ id }}" type="radio" /></td>
            <td class="description">{{ description }}</td>
            <td>{{ estimatedTomato }}</td>
            <td>{{ usedTomato }}</td>
            <td><button class="complete-button">Mark as completed</button></td>
            <td><button class="remove-button">Remove</button></td>
        </tr>
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            var tomatoModel = makeTomatoModel();
            var tomatoWidget = makeTomatoWidget({
                model: tomatoModel,
                clockPanel: $('#clock-panel'),
                countsPanel: $('#counts-panel'),
                taskPanel: $('#task-panel'),
                startButton: $('#start-button'),
                stopButton: $('#stop-button'),
                stopRingButton: $('#stop-ring-button'),
                alarm: document.getElementById('alarm') // the '$' doesn't work for it.
            });
            tomatoWidget.render();

            var todoListModel = makeTodoListModel(tomatoModel);
            var todoListWidget = makeTodoListWidget({
                model: todoListModel,
                descriptionInput: $('#description'),
                estimatedTomatoInput: $('#estimate'),
                addTodoButton: $('#add-todo-button'),
                tableBody: $('#todo-list > tbody')
            });
            todoListWidget.render();
        });
    </script>
</head>
<body>
    <!-- sound file is from http://soundbible.com/1550-Fire-Alarm.html -->
    <audio style="display: none;" id="alarm" preload="true" src="alarm.wav"></audio>
    <div id="tomato">
        <h2 id="clock-panel"></h2>
        <h2 id="task-panel"></h2>
        <p id="counts-panel"></p>
        <div id="controls">
            <button id="start-button">Start</button>
            <button id="stop-button" disabled="disabled">Stop</button>
            <button id="stop-ring-button" style="display: none;">Stop ring</button>
        </div>
    </div>
    <div id="todos">
        <label for="description">Description:</label>
        <input id="description" name="description" type="text" />
        <label for="estimate">Estimated tomatos:</label>
        <input id="estimate" name="estimate" type="text" />
        <button id="add-todo-button">Add</button>
        <table id="todo-list">
            <thead>
                <th></th>
                <th>Description</th>
                <th>Estimated tomatos</th>
                <th>Used tomatos</th>
                <th></th>
                <th></th>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</body>
</html>
