<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Pomodoro Timer</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js" type="text/javascript"></script>
    <script src="pomodo.js" type="text/javascript"></script>
</head>
<body>
    <p id="clock">25:00</p>
    <div id="controls">
        <button id="btn-start" disabled="disabled">Start</button>
        <button id="btn-stop" disabled="disabled">Stop</button>
    </div>

    <!-- sound file is from http://soundbible.com/1550-Fire-Alarm.html -->
    <audio style="display: none;" id="alarm" preload src="alarm.wav">

    <script type="text/javascript">
        var clock = $('#clock');
        var btnStart = $('#btn-start');
        var btnStop = $('#btn-stop');
        var alarm = document.getElementById('alarm'); // the '$' doesn't work for it.

        function toggleEnabled(target) {
            obj = (target.attr == undefined) ? $(target) : target;
            new_attr = (obj.attr('disabled') == null) ? 'disabled' : null;
            obj.attr('disabled', new_attr);
        }

        function switchEnabled() {
            toggleEnabled(btnStart);
            toggleEnabled(btnStop);
        }

        var timer = new CountdownTimer({
            onInterval: function (current) {
                clock.text(current);
            },
            onTimeUp: function () {
                clock.html('<strong style="color: red;">0:00</strong>');
                alarm.play();
                switchEnabled();
            }
        });

        $('#btn-start').click(function(){
            timer.start();
            switchEnabled();
        });

        $('#btn-stop').click(function(){
            timer.stop();
            clock.text('25:00');
            switchEnabled();
        });

        toggleEnabled(btnStart); // enable it when everything is loaded.
    </script>
</body>
</html>
